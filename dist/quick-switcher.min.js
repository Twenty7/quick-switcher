!function(e,t){var s={filters:{isFuzzyMatch:function(e,t){for(var s=0,l=0;s<e.length&&l<t.length;s++)for(;l<t.length&&(l++,e.charAt(s)!==t.charAt(l)););return l<t.length},areWordsFound:function(e,t){for(var s=e.split(/[^\w]/),l=0;l<s.length;l++)if(t.indexOf(s[l])===-1)return!1;return!0},isMatch:function(e,t){return t.indexOf(e)!==-1||!!this.areWordsFound(e,t)}}},l={init:function(e,s,l,i){this.$parentDom=null,this.$liCollection=null,this.valueObjects=null,this.selectedIndex=null,this.$results=null,this.$noSearchTerms=null,this.$noResults=null,this.$loading=null,this.$breadcrumb=null,this.$search=null,this.searchText="",this.searchDelayTimeout=null,this.searchId=0,this.options=t.extend({searchDelay:1e3},i),this.initDomElement(e),this.searchCallback=s,this.abortSearchCallback=null,this.searchDelay=this.options.searchDelay,this.selectCallback=l,this.callbackStack=[]},initDomElement:function(e){var s=this;this.$parentDom=e,this.$domElement=t('<div class="lstr-qswitcher-overlay"></div><div class="lstr-qswitcher-container">  <form class="lstr-qswitcher-popup">    <div class="lstr-qswitcher-breadcrumb">    </div>    <div class="lstr-qswitcher-help">      <ul>        <li><em>&#8597;</em> to navigate</li>        <li><em>&#8629;</em> to select</li>        <li><em>&#9003;</em> to clear</li>        <li><em>esc</em> to dismiss</li>      </ul>    </div>    <input type="text" class="lstr-qswitcher-search form-control" />    <div class="lstr-qswitcher-loading">Loading...</div>    <div class="lstr-qswitcher-no-terms"></div>    <div class="lstr-qswitcher-no-results">No results found</div>    <div class="lstr-qswitcher-oops-results">Oops! Something went wrong while trying to load your results.</div>    <div class="lstr-qswitcher-results"></div>  </form></div>'),e.append(this.$domElement),this.$breadcrumb=this.$domElement.find(".lstr-qswitcher-breadcrumb"),this.$search=this.$domElement.find(".lstr-qswitcher-search"),this.$loading=this.$domElement.find(".lstr-qswitcher-loading"),this.$results=this.$domElement.find(".lstr-qswitcher-results"),this.$noSearchTerms=this.$domElement.find(".lstr-qswitcher-no-terms"),this.$noResults=this.$domElement.find(".lstr-qswitcher-no-results"),this.$oopsResults=this.$domElement.find(".lstr-qswitcher-oops-results"),this.$domElement.find(".lstr-qswitcher-popup").on("submit",function(e){e.preventDefault()}),this.$parentDom.find(".lstr-qswitcher-overlay").on("click",function(e){s.closeSwitcher(),e.preventDefault()}),this.$parentDom.on("keydown",function(e){(e.metaKey||e.ctrlKey)&&75===e.which&&(s.toggleSwitcher(),e.preventDefault())}),t("html").on("keydown",".lstr-qswitcher-noscroll",function(e){if(38===e.which)s.selectIndex(s.selectedIndex-1),s.scrollToSelectedItem(),e.preventDefault();else if(40===e.which)s.selectIndex(s.selectedIndex+1),s.scrollToSelectedItem(),e.preventDefault();else if(27===e.which)s.toggleSwitcher(),e.preventDefault();else if(13===e.keyCode){t(this);s.triggerSelect(s.selectedIndex,e),e.preventDefault()}}),this.$search.on("keyup",function(e){var t=s.$search.val();s.searchDelayTimeout&&(clearTimeout(s.searchDelayTimeout),s.searchDelayTimeout=null),t!==s.searchText?s.searchDelayTimeout=setTimeout(function(){s.selectIndex(null),s.searchText=t,s.renderList()},s.searchDelay):8===e.which&&""===t&&(s.popCallback(),s.renderList())}),this.$domElement.on("hover",".lstr-qswitcher-results li",function(){var e=t(this);s.selectIndex(e.data("lstr-qswitcher").index)}),this.$domElement.on("click",".lstr-qswitcher-results li",function(e){var l=t(this);s.triggerSelect(l.data("lstr-qswitcher").index,e)})},renderList:function(){this.abortSearchCallback&&(this.abortSearchCallback(),this.abortSearchCallback=null),this.renderBreadcrumb(),this.usePane(this.$loading);var e=Object.create(s);++this.searchId,e.setResults=this.setResults.bind(this,this.searchId),e.setError=this.setError.bind(this,this.searchId),this.abortSearchCallback=this.searchCallback(this.searchText,e)},setResults:function(e,s){if(e===this.searchId){var l=this;if(l.valueObjects=[],0==s.length)return this.$results.html(""),void this.usePane(this.searchText?this.$noResults:this.$noSearchTerms);var i=t("<ul>");s.forEach(function(e,s){var r=t("<li>"),c=t("<div>");if(i.append(r),r.append(c),l.setListText(c,e),e.description){var a=t('<span class="lstr-qswitcher-results-description"></span>');l.setListText(a,e.description),r.prepend(a)}r.data("lstr-qswitcher",{index:s}),c.addClass("lstr-qswitcher-result-container"),e.searchCallback&&r.addClass("lstr-qswitcher-result-category"),l.valueObjects[s]={index:s,value:e,$li:r}}),this.$results.html(i),this.usePane(this.$results),l.selectIndex(0)}},setError:function(e){e===this.searchId&&this.usePane(this.$oopsResults)},renderBreadcrumb:function(){var e=t("<ul>");this.callbackStack.forEach(function(s,l){var i=t("<li>");i.text(s.text),e.append(i)}),this.$breadcrumb.html(e)},setListText:function(e,t){return t.toHtml||t.html?void e.html(t.toHtml?t.toHtml():t.html):t.toText||t.text?void e.text(t.toText?t.toText():t.text):void e.text(t)},selectIndex:function(e){return null!==this.selectedIndex&&this.valueObjects[this.selectedIndex]&&this.valueObjects[this.selectedIndex].$li.removeClass("lstr-qswitcher-result-selected"),null===e?void(this.selectedIndex=null):(this.selectedIndex=e%this.valueObjects.length,this.selectedIndex<0&&(this.selectedIndex=this.valueObjects.length-1),void this.valueObjects[this.selectedIndex].$li.addClass("lstr-qswitcher-result-selected"))},scrollToSelectedItem:function(){var e=this.valueObjects[this.selectedIndex].$li,t=this.$results,s=e.offset().top-e.parent().offset().top,l=s+e.outerHeight(!0),i=t.scrollTop(),r=i+t.outerHeight(!0);(l>r||s<i)&&t.scrollTop(s)},toggleSwitcher:function(){this.useRootCallback(),this.$search.val(""),this.renderList(),this.$parentDom.toggleClass("lstr-qswitcher-noscroll"),this.$search.focus()},closeSwitcher:function(){this.$parentDom.removeClass("lstr-qswitcher-noscroll")},triggerSelect:function(e,t){if(null!==e){var s=this.valueObjects[e].value;return s.searchCallback?(this.callbackStack.push({text:s.breadcrumbText,parentSearchCallback:this.searchCallback,parentSearchDelay:this.parentSearchDelay,parentSelectCallback:this.selectCallback}),this.searchCallback=s.searchCallback,s.searchDelay&&(this.searchDelay=s.searchDelay),s.selectCallback&&(this.selectCallback=s.selectCallback),this.valueObjects=[],this.selectIndex(null),this.$search.val(""),void this.renderList()):void(!1!==this.selectCallback(s,t)&&this.closeSwitcher())}},popCallback:function(){var e=this.callbackStack.pop();return!!e&&(this.searchCallback=e.parentSearchCallback,this.searchDelay=e.parentSearchDelay,this.selectCallback=e.parentSelectCallback,!0)},useRootCallback:function(){for(;this.callbackStack.length>0;)this.popCallback()},usePane:function(e){this.$results.hide(),this.$noSearchTerms.hide(),this.$noResults.hide(),this.$oopsResults.hide(),this.$loading.hide(),e.show()}};e.lstrQuickSwitcher=function(e,s,i){var r=t("body"),c=Object.create(l);c.init(r,e,s,i)}}(window,jQuery);